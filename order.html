<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/icons/shawarma.ico" type="image/x-icon">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/fonts.css">
    <link rel="stylesheet" href="CSS/order.css">
    <link rel="stylesheet" href="CSS/mainMenu.css">
    <title>Шаурмания</title>
    <script language = "javascript">
function montharr(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11) {
  this[0] = m0;
  this[1] = m1;
  this[2] = m2;
  this[3] = m3;
  this[4] = m4;
  this[5] = m5;
  this[6] = m6;
  this[7] = m7;
  this[8] = m8;
  this[9] = m9;
  this[10] = m10;
  this[11] = m11;
}

function calendar() {
  var monthNames = "   ЯнвФевMaрАпрMaйИюнИюлАвгСенОктНояДек";
  var today = new Date();
  var thisDay;
  var monthDays = new montharr(31, 28, 31, 30, 31, 30, 31, 31, 30,31, 30, 31);
  year = today.getYear();
  if (year < 2000)
    year = year + 1900;
  thisDay = today.getDate();
  if (((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0))
    monthDays[1] = 29;
  nDays = monthDays[today.getMonth()];
  firstDay = today;
  firstDay.setDate(1);
  testMe = firstDay.getDate();
  if (testMe == 2)
    firstDay.setDate(0);
  startDay = firstDay.getDay();
  document.writeln("<div align = 'center' class='calendar'>");
  document.write("<table class='table' border = '1'>");
  document.write("<tr class='tHeader'><th colspan='7'>");
  document.write(monthNames.substring(today.getMonth() * 3 + 3, (today.getMonth() + 1) * 3 + 3));
  document.write(". ");
  document.write(year);
  document.write("<tr> <th>Пон <th>Вт <th>Ср <th>Чт <th>Пт <th>Сб <th>Вск" );
  document.write("<tr>");
  column = 0;
  for (i = 1; i < startDay; i++) {
    document.write("<td width='30'>");
    column++;
  }
    for (i = 1; i <= nDays; i++) {
    document.write("<td class = 'line' width=30>");
    document.write(i);
    column++;
    if (column == 7) {
      document.write("<tr>");
      column = 0;
    }
  }
  const days = document.querySelectorAll(".line");
  days[+thisDay -1].style.color = "#adac7e";
  document.querySelector("#calDate").value = thisDay + ".11." + 23;
  document.write("</table>");
  document.writeln("</div>");
    for (let i in days ) {
        days[i].id = +i + 1;
        days[i].addEventListener('click', function() {
            days[i].style.color = "#adac7e";
            days[+thisDay - 1].style.color = "white";
            thisDay = days[i].id;
            document.querySelector("#calDate").value = thisDay + ".11." + 23;
        })
        document.querySelector(".ordering").append(document.querySelector(".calendar"));
    }
}    
        </script>
</head>

<body>
  <nav class="menu">
      <a href="index.html">Главная</a>
      <a href="about.html">О нас</a>
      <a href="newThings.html">Горячие новинки</a>
      <a href="menu.html">Меню</a>
  </nav>
  <button class="burgerMenu">
      <img src="images/header_page/burgerMenuButton.png">
  </button>
  <div class="temno"></div>
  <div class="basket">
      <button onclick="window.location.href = 'basket.html'" class="basket-btn">
          <img class="basket-image" src="images/icons/basket.png" alt="Корзина">
      </button>
  </div>
  <div id="main">
      <div id="purchase-list">
          <div class="purchase-header">
              <div id="basket-counter">Товаров в заказе: 0</div>
              </div> </div> </div>
    <div class = "ordering">
        <h5 class="order" ALIGN="center">Оформить заказ</h5>
        <p class="cardText" id="number">Номер карты</p>
        <input type="text" data-format=" ****-****-****-****" data-mask=" ____.____.____.____" class="bankCard" id="cardNumber" placeholder="Номер карты">
        
        <p class="cardText" id="date">Срок действия</p>
        <input type="text" data-format=" **/**" data-mask=" __/__" class="bankCard" id="cardDate" placeholder="Срок действия">
        
        <p class="cardText" id="cvv">cvv</p>
        <input type="text" data-format=" ***" data-mask=" ___" class="bankCard" id="cardCvv" placeholder="cvv">

        <p class="customerName" id="Name">Имя</p>
        <input type="text" data-formatn="************" data-maskn="   " class="bankCard" id="custName" placeholder="Имя">

        <div class="calW">
        <p class="customerName" id="Date">Дата</p>
        <input type="text" data-format="**.**.**" data-mask="__.__.__" class="bankCard" id="calDate" placeholder="дд.мм.гг">
        <button class="cal">
            <img src="images/header_page/cal.png">
        </button>
        </div>

        <p class="time" id="time">Время</p>
        <input type="text" data-format="**:**" data-mask="--:--" class="bankCard" id="Time" placeholder="Время">

        <div class="check">
            <input type="checkbox" class = "box" id="Салфетки" name="Соус" checked />
            <label for="Салфетки">Салфетки</label>
            <input type="checkbox" class = "box" id="Соус" name="Соус" checked />
            <label for="Соус">Соус</label>
            <input type="checkbox" class = "box" id="Лаваш" name="Лаваш?"/>
            <label for="Лаваш">Убрать лаваш</label>
            <input type="checkbox" class = "box" id="Сухари" name="Сухари?"/>
            <label for="Сухари">Добавить сухари</label>
            <input type="checkbox" class = "box" id="Доставить" name="Доставить?"/>
            <label for="Доставить">Доставка (бесплатно)</label>
        </div>

        <button id="submit"> Отправить </button>

    </div>
    </div>
    <script language = 'javascript'>
        calendar();
    </script>
    <script>
            function doFormat(value, pattern, mask)
        {
            // удаляем все нечисловые значения из значения
            const strippedValue = value.replace(/[^0-9]/g, "");

            // преобразуем строку-значение в массив символов
            const chars = strippedValue.split('');


            let count = 0;
            let formatted = '';

            // форматируем строку
            for (let i = 0; i < pattern.length; i++)
            {
                const char = pattern[i];
                if (chars[count])
                {
                    if (/\*/.test(char)) {
                        formatted += chars[count];
                        count++;
                    } else {
                        formatted += char;
                    }
                }
                else if (mask)
                {
                    const splittedMask = mask.split('');

                    if (splittedMask[i])
                    {
                        formatted += splittedMask[i];
                    }
                }
            }


            return formatted;
        }

        document.querySelectorAll('[data-mask]').forEach(function (e) {

            function format(elem) {
                const val = doFormat(elem.value, elem.getAttribute('data-format'));
                elem.value = doFormat(elem.value, elem.getAttribute('data-format'), elem.getAttribute('data-mask'));

                if (elem.createTextRange) {
                    var range = elem.createTextRange();
                    range.move('character', val.length);
                    range.select();
                } else if (elem.selectionStart) {
                    elem.focus();
                    elem.setSelectionRange(val.length, val.length);
                }
            }

            e.addEventListener('keyup', function () {
                format(e);
            });

            e.addEventListener('keydown', function () {
                format(e);
            });

            format(e)
        });

    </script>
  <script type="module" src="JS/order.js"></script>
  <script src="JS/burgerMenu.js"></script>

</body>